$(document).ready(function(){$("#form").steps({bodyTag:"fieldset",errorLabelContainer:"#messageBox",labels:{cancel:"إلغاء",current:"المرحلة الحالية:",pagination:"Pagination",finish:"إنهاء",next:"التالي",previous:"السابق",loading:"تحميل ..."},onStepChanging:function(e,t,i){if(t>i)return!0;if(3===i&&Number($("#age").val())<18)return!1;var r=$(this);return i>t&&($(".body:eq("+i+") label.error",r).remove(),$(".body:eq("+i+") .error",r).removeClass("error")),r.validate().settings.ignore=":disabled,:hidden",r.valid()},onStepChanged:function(e,t,i){2===t&&Number($("#age").val())>=18&&$(this).steps("next"),2===t&&3===i&&$(this).steps("previous")},onFinishing:function(e,t){var i=$(this);return i.validate().settings.ignore=":disabled",i.valid()},onFinished:function(e,t){var i=$(this);i.submit()}}).validate({rules:{vacationType:{required:!0},vacationStart:{date:!0,required:!0},vacationEnd:{date:!0,required:!0},vacationDuration:{date:!0,required:!0}},messages:{vacationType:{required:"أدخل نوع الإجازة!"},vacationStart:{date:"أدخل تاريخ مناسب",required:"هذا الحقل ضروري"},vacationEnd:{date:"أدخل تاريخ مناسب",required:"هذا الحقل ضروري"}}}),$(".select2").select2({dir:"rtl"});var e={totalCredit:90,inProgressCredit:12,oldCredit:15,newCredit:0,restCredit:function(){return this.totalCredit-this.oldCredit-this.newCredit-this.inProgressCredit},sourceCredit:0};$("#vacationChart").sparkline([e.newCredit,e.restCredit(),e.oldCredit,e.inProgressCredit],{type:"pie",height:"150px",sliceColors:["#23c6c8","#e8ecff","#f8ac59","#1c84c6","#ED5565"]});var t=document.getElementById("lblRestCredit"),i=document.getElementById("lblAnnualCredit"),r=document.getElementById("lblProgressVacation");i.innerHTML=e.totalCredit,t.innerHTML=e.restCredit(),r.innerHTML=e.inProgressCredit;var a=$("input[name='vacationDuration']"),n;a.prop("disabled",!0),a.TouchSpin({verticalbuttons:!0,initval:0,min:0,max:0,step:1,decimals:0,boostat:5,maxboostedstep:10,postfix:"يوم"}),n=$("#lblNewVacation"),n.html($("#vacationDuration").val());var o,c,d,s,l,u;u=$("#vacationStart"),$("#vacationType").change(function(){c=$("#vacationType").val(),1==c&&(o="عدد الأيام لا يمكن أن يكون أقل من 5 أيام",a.prop("disabled",!1),l=5,s=5,d=e.restCredit()),2==c&&(o="عدد الأيام لا يمكن أن يكون أكثر من 5 أيام",a.prop("disabled",!1),a.val("1"),l=1,s=1,d=5),0==c&&(o="نرجو إختيار نوع الإجازة",a.prop("disabled",!0),l=0,s=0,d=0),a.trigger("touchspin.updatesettings",{max:d,min:s,initval:l}),n.html($("#vacationDuration").val()),e.newCredit=$("#vacationDuration").val(),$("#vacationChart").sparkline([e.newCredit,e.restCredit(),e.oldCredit,e.inProgressCredit],{type:"pie",height:"150px",sliceColors:["#23c6c8","#e8ecff","#f8ac59","#1c84c6","#ED5565"]}),$("input[name='vacationDuration']").change(function(){n.html($("#vacationDuration").val()),e.newCredit=$("#vacationDuration").val(),$("#vacationChart").sparkline([e.newCredit,e.restCredit(),e.oldCredit,e.inProgressCredit],{type:"pie",height:"150px",sliceColors:["#23c6c8","#e8ecff","#f8ac59","#1c84c6","#ED5565"]})})});var v=document.querySelector(".typeSwitch"),C=new Switchery(v,{color:"rgb(27, 175, 153)",secondaryColor:"rgb(27, 175, 153)",jackColor:"#fcf45e",jackSecondaryColor:"#c8ff77",size:"small"}),p=document.querySelector(".typeSwitch");p.addEventListener("change",function(){p.checked?(e.sourceCredit=!0,console.log(e.sourceCredit)):(e.sourceCredit=!1,console.log(e.sourceCredit))}),$("#vacationStart").calendarsPicker({calendar:$.calendars.instance("ummalqura"),minDate:0,isRTL:!0}),$("#vacationStart").change(function(){var e=$("#vacationStart").val();$("#vacationEnd").val(e),console.log(e)})});